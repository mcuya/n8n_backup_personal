{"updatedAt":"2025-11-06T04:37:33.000Z","createdAt":"2025-11-06T04:36:49.391Z","id":"T8rq8hiYz8moBvtV","name":"ErrorHandle","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.errorTrigger","typeVersion":1,"position":[0,0],"id":"75db8a7f-b401-4294-9754-939934f7f0b7","name":"Error Trigger"},{"parameters":{"jsCode":"// N8N Function Node - Formatear error de ejecuci√≥n para WhatsApp\n\nconst data = $input.all();\n\n\nfunction formatErrorForWhatsApp(item) {\n\n  const errorData = item.json;\n\n  const execution = errorData.execution;\n\n  const workflow = errorData.workflow;\n\n \n\n  // Formatear el mensaje de WhatsApp\n\n  let whatsappMessage = '';\n\n \n\n  // Encabezado del error\n\n  whatsappMessage += `üö® *ERROR EN AUTOMATIZACI√ìN*\\n\\n`;\n\n \n\n  // Informaci√≥n del workflow\n\n  whatsappMessage += `üìã *Workflow:* ${workflow.name}\\n`;\n\n  whatsappMessage += `üÜî *ID:* ${workflow.id}\\n\\n`;\n\n \n\n  // Informaci√≥n de la ejecuci√≥n\n\n  whatsappMessage += `‚ö° *Ejecuci√≥n:* #${execution.id}\\n`;\n\n  whatsappMessage += `üîÑ *Modo:* ${execution.mode}\\n`;\n\n \n\n  // Si es un retry, mostrarlo\n\n  if (execution.retryOf) {\n\n    whatsappMessage += `üîÅ *Reintento de:* #${execution.retryOf}\\n`;\n\n  }\n\n \n\n  // √öltimo nodo ejecutado\n\n  whatsappMessage += `üìç *√öltimo nodo:* ${execution.lastNodeExecuted}\\n\\n`;\n\n \n\n  // Mensaje de error\n\n  whatsappMessage += `‚ùå *Error:*\\n${execution.error.message}\\n\\n`;\n\n \n\n  // URL para revisar (opcional)\n\n  whatsappMessage += `üîó *Ver detalles:*\\n${execution.url}\\n\\n`;\n\n \n\n  // Pie del mensaje\n\n  whatsappMessage += `‚è∞ ${new Date().toLocaleString('es-ES')}`;\n\n \n\n  return {\n\n    json: {\n\n      whatsapp_message: whatsappMessage,\n\n      error_summary: {\n\n        workflow_name: workflow.name,\n\n        execution_id: execution.id,\n\n        error_message: execution.error.message,\n\n        failed_node: execution.lastNodeExecuted\n\n      }\n\n    }\n\n  };\n\n}\n\n\n// Procesar todos los items de entrada\n\nreturn data.map(formatErrorForWhatsApp);"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[208,0],"id":"65622009-cef3-45fd-a29b-c33fa2890883","name":"Code in JavaScript"}],"connections":{"Error Trigger":{"main":[[{"node":"Code in JavaScript","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"e6c38fd8-1651-48cc-a0df-2eb69810b1db","triggerCount":0,"shared":[{"updatedAt":"2025-11-06T04:36:49.396Z","createdAt":"2025-11-06T04:36:49.396Z","role":"workflow:owner","workflowId":"T8rq8hiYz8moBvtV","projectId":"1gg6i9VZSAt1Ux0x"}],"tags":[]}